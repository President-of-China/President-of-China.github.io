class Builder{constructor(){this._builders={categories:this._buildCategories.bind(this),category:this._buildCategory.bind(this),section:this._buildSection.bind(this),title:this._buildTitle.bind(this),text:this._buildText.bind(this),image:this._buildImage.bind(this),snippet:this._buildSnippet.bind(this),ref:this._buildRef.bind(this),parameters:this._buildParameters.bind(this),parameter:this._buildParameter.bind(this),returns:this._buildReturns.bind(this),errors:this._buildErrors.bind(this),error:this._buildError.bind(this)}}build(t,e){const r=document.createElement("div");return r.classList.add("master"),this._loadTemplates(e),Object.keys(t).forEach(i=>{const n=this._getTemplate(i);if(n){const s=this._builders[i](t[i],n);r.append(s)}}),r}_loadTemplates(t){this._templates={},t.forEach(e=>{e=e.content.firstElementChild,this._templates[e.className]=e})}_getTemplate(t){if(t in this._templates)return this._templates[t].cloneNode(!0)}_buildCategories(t,e){return Object.keys(t).forEach(r=>{const i=this._getTemplate("category"),n=i.querySelector(".headline");n.innerHTML=t[r].category.title,e.append(this._builders.category(t[r],i))}),e}_buildCategory(t,e){const{components:r}=t.category,i=e.querySelector(".container");return Object.values(r).forEach(n=>{const s=Object.keys(n).pop(),o=this._getTemplate(s);!s||!o||(n.parent=t.category.title,i.append(this._builders[s](n,o)))}),e}_buildSection(t,e){const r=e.querySelector(".headline"),i=e.querySelector(".header");r.innerHTML=t.section.title,i.innerHTML=t.parent;const{components:n}=t.section,s=e.querySelector(".content");return Object.values(n).forEach(o=>{const l=Object.keys(o).pop(),u=this._getTemplate(l);!l||!u||s.append(this._builders[l](o,u))}),e}_buildTitle(t,e){return e.innerHTML=t.title.value,e}_buildText(t,e){return e.innerHTML=t.text.value,e}_buildImage(t,e){const r=e.querySelector("img");return r.src=t.image.link,e}_buildSnippet(t,e){let r="";const i=e.querySelector(".source"),n=e.querySelector(".python");return Object.values(t.snippet.lines).forEach(s=>{r=r.concat(`${s.line}
`)}),i.innerHTML=r,n.innerHTML=r,e}_buildRef(t,e){return e}_buildParameters(t,e){return Object.values(t.parameters).forEach(r=>{const i=Object.keys(r).pop(),n=this._getTemplate(i);if(!i||!n){console.log("Unknown component"),console.log(r);return}e.append(this._builders[i](r,n))}),e}_buildParameter(t,e){const r=e.querySelector(".signature > .label"),i=e.querySelector(".description"),n=e.querySelector(".type > .label"),s=e.querySelector(".type > .value"),o=e.querySelector(".values > .label"),l=e.querySelector(".values > .value"),u=e.querySelector(".default > .label"),c=e.querySelector(".default > .value");return r.innerHTML=t.parameter.param.value,i.innerHTML=t.parameter.description.value,n.innerHTML=t.parameter.type.text.value,s.innerHTML=t.parameter.type.value,o.innerHTML=t.parameter.values.text.value,l.innerHTML=t.parameter.values.value,u.innerHTML=t.parameter.default.text.value,c.innerHTML=t.parameter.default.value,e}_buildReturns(t,e){const r=e.querySelector(".description"),i=e.querySelector(".type > .label"),n=e.querySelector(".type > .value"),s=e.querySelector(".values > .label"),o=e.querySelector(".values > .value");return i.innerHTML=t.returns.type.text.value,n.innerHTML=t.returns.type.value,r.innerHTML=t.returns.description.value,s.innerHTML=t.returns.values.text.value,o.innerHTML=t.returns.values.value,e}_buildErrors(t,e){return Object.values(t.errors).forEach(r=>{const i=Object.keys(r).pop(),n=this._getTemplate(i);if(!i||!n){console.log("Unknown component"),console.log(r);return}e.append(this._builders[i](r,n))}),e}_buildError(t,e){const r=e.querySelector(".type"),i=e.querySelector(".description");return r.innerHTML=t.error.type.value,i.innerHTML=t.error.description.value,e}}
